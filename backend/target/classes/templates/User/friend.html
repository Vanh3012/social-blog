<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
    th:with="pageTitle='T√¨m ng∆∞·ªùi d√πng', content='this :: content'" 
    th:replace="~{layout/base :: layout(~{::content})}">

<body>
    <section th:fragment="content">
        <div class="rounded-2xl border border-neutral-200 bg-white p-6 shadow-sm">
            <h1 class="text-lg font-semibold mb-4">üîç T√¨m ng∆∞·ªùi d√πng</h1>

            <form method="get" action="/friend/search" class="flex items-center gap-2 mb-6">
                <input type="text" name="keyword" th:value="${keyword}" placeholder="Nh·∫≠p t√™n ho·∫∑c username..."
                    class="flex-1 rounded-xl border border-neutral-300 px-3 py-2 focus:ring-2 focus:ring-neutral-900" />
                <button type="submit"
                    class="rounded-lg bg-neutral-900 text-white px-4 py-2.5 hover:bg-black whitespace-nowrap">
                    T√¨m ki·∫øm
                </button>
            </form>

            <div class="divide-y divide-neutral-200" th:if="${users != null and !#lists.isEmpty(users)}">
                <div th:each="u : ${users}" class="py-4 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-neutral-900 to-neutral-600 flex items-center justify-center text-white font-semibold text-lg"
                            th:text="${u.fullName != null ? #strings.substring(u.fullName, 0, 1) : 'U'}">
                            U
                        </div>
                        <div>
                            <div class="font-medium" th:text="${u.fullName ?: u.username}">User</div>
                            <div class="text-xs text-neutral-500" th:text="${u.email}">email</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <a th:href="@{|/user/${u.id}|}"
                            class="rounded-lg border border-neutral-300 px-3 py-1.5 text-sm hover:bg-neutral-100">
                            Xem trang
                        </a>
                        <form th:action="@{|/friend/request/${u.id}|}" method="post">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                            <button type="submit"
                                class="rounded-lg bg-neutral-900 text-white px-3 py-1.5 text-sm hover:bg-black">
                                K·∫øt b·∫°n
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div th:if="${users == null}" class="text-center text-neutral-500 py-16">
                <div class="text-4xl mb-2">üîç</div>
                <p>Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m ki·∫øm ng∆∞·ªùi d√πng.</p>
            </div>

            <div th:if="${users != null and #lists.isEmpty(users)}" class="text-center text-neutral-500 py-16">
                <div class="text-4xl mb-2">üòï</div>
                <p>Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng ph√π h·ª£p.</p>
                <p class="text-sm mt-2">Th·ª≠ t√¨m ki·∫øm v·ªõi t·ª´ kh√≥a kh√°c</p>
            </div>
        </div>
    </section>
</body>

</html>